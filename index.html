<!DOCTYPE html>

<html lang="es">

<head>

  <meta charset="UTF-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Gestor Operativo ‚Äî Plataforma de Automatizaci√≥n</title>

  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700&display=swap" rel="stylesheet">

  <style>

    :root {

      --color-bg: #f4f7fe;

      --color-surface: #ffffff;

      --color-primary-start: #6a11cb;

      --color-primary-end: #2575fc;

      --color-disabled: #cbd5e1;

      --color-text: #0f172a;

      --color-text-secondary: #64748b;

      --shadow-lg: 0 20px 40px -12px rgba(0,0,0,0.15);

      --font: 'Manrope', sans-serif;

    }

    * { box-sizing: border-box; }

    body { margin: 0; font-family: var(--font); background: var(--color-bg); color: var(--color-text); display: flex; min-height: 100vh; overflow-y: auto; }

    .background { position: fixed; inset: 0; overflow: hidden; z-index: -1; }

    .blob { position: absolute; border-radius: 50%; filter: blur(100px); opacity: 0.35; }

    .blob1 { width: 400px; height: 400px; background: #6a11cb; top: -100px; left: -100px; animation: move1 30s infinite alternate ease-in-out; }

    .blob2 { width: 350px; height: 350px; background: #2575fc; bottom: -150px; right: -120px; animation: move2 40s infinite alternate ease-in-out; }

    .blob3 { width: 300px; height: 300px; background: #16a34a; top: 40%; left: 60%; animation: move3 35s infinite alternate ease-in-out; }

    @keyframes move1 { 0% { transform: translate(0,0);} 100% { transform: translate(150px,200px);} }

    @keyframes move2 { 0% { transform: translate(0,0);} 100% { transform: translate(-200px,-100px);} }

    @keyframes move3 { 0% { transform: translate(0,0);} 100% { transform: translate(100px,-150px);} }

    /* Sidebar completo (oculto por defecto) */
    .sidebar { 
      width: 260px; 
      background: linear-gradient(180deg, var(--color-primary-start), var(--color-primary-end)); 
      color: #fff; 
      padding: 28px 18px 22px; 
      display: flex; 
      flex-direction: column; 
      align-items: center; 
      box-shadow: var(--shadow-lg); 
      z-index: 10; 
      position: fixed;
      left: -200px;
      top: 0;
      height: 100vh;
      transition: left 0.3s ease;
      overflow: hidden;
    }
    
    .sidebar:hover,
    .sidebar.show {
      left: 0;
    }

    .sidebar h1 { margin: 0; font-size: 22px; font-weight: 700; text-align: center; }

    .sidebar h2 { margin: 6px 0 20px; font-size: 12px; font-weight: 400; opacity: .9; text-align: center; }

    .sidebar ul { list-style: none; padding: 0; margin: 0; width: 100%; display: flex; flex-direction: column; gap: 12px; }

    .sidebar a {

      background: rgba(255,255,255,.16); padding: 12px 14px; border-radius: 10px;

      font-size: 14px; cursor: pointer; display: flex; justify-content: space-between;

      align-items: center; transition: background .25s; color: #fff; text-decoration: none;

    }

    .sidebar a:hover { background: rgba(255,255,255,.28); }

    .sidebar a.active { background: rgba(255,255,255,.35); }

    .sidebar a.disabled { opacity: .55; cursor: not-allowed; pointer-events: none; }

    /* Sidebar colapsado con √≠conos (siempre visible) */
    .sidebar-collapsed {
      position: fixed;
      left: 0;
      top: 0;
      width: 60px;
      height: 100vh;
      background: linear-gradient(180deg, var(--color-primary-start), var(--color-primary-end));
      z-index: 9;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 28px 8px;
      gap: 15px;
      transition: opacity 0.3s ease;
    }

    .sidebar.show + .sidebar-collapsed {
      opacity: 0;
      pointer-events: none;
    }

    .icon-only {
      width: 44px;
      height: 44px;
      border-radius: 12px;
      background: rgba(255,255,255,.16);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      cursor: pointer;
      transition: background 0.25s;
      color: #fff;
      text-decoration: none;
    }

    .icon-only:hover {
      background: rgba(255,255,255,.28);
    }

    .icon-only.active {
      background: rgba(255,255,255,.35);
    }

    .status-dot { width: 8px; height: 8px; border-radius: 50%; background: #16a34a; animation: blink 1.2s infinite; }

    @keyframes blink { 0%,50%,100%{opacity:1} 25%,75%{opacity:0} }

    .top-banner { 
      position: fixed; 
      top: 0; 
      left: 60px; 
      right: 0; 
      background: linear-gradient(90deg, var(--color-primary-start), var(--color-primary-end)); 
      color: #fff; 
      padding: 18px 36px; 
      box-shadow: var(--shadow-lg); 
      display: flex; 
      align-items: baseline; 
      gap: 14px; 
      z-index: 5; 
      transition: left 0.3s ease; 
    }

    .top-banner h1 { margin: 0; font-size: 26px; font-weight: 700; }

    .top-banner p { margin: 0; font-size: 14px; opacity: .95; }

    .main { 
      flex: 1; 
      margin-left: 60px;
      padding: 110px 36px 28px 36px; 
      overflow-y: auto; 
      position: relative; 
      max-height: 100vh;
      transition: margin-left 0.3s ease;
    }

    .inicio { max-width: 1100px; margin: 0 auto; text-align: center; }

    .card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 22px; margin-top: 26px; }

    a.card {

      background: var(--color-surface); border-radius: 18px; padding: 26px; box-shadow: var(--shadow-lg);

      cursor: pointer; transition: transform .22s, box-shadow .22s; position: relative;

      text-decoration: none; color: inherit;

    }

    a.card:hover { transform: translateY(-6px); box-shadow: 0 25px 50px -15px rgba(106,17,203,.22); }

    a.card h2 { margin: 12px 0 4px; font-size: 20px; }

    a.card p { margin: 0; color: var(--color-text-secondary); font-size: 14px; }

    .card-icon { width: 58px; height: 58px; margin: 0 auto; border-radius: 50%; display: grid; place-items: center; color: #fff; background: linear-gradient(135deg, var(--color-primary-start), var(--color-primary-end)); font-size: 26px; }

    .status-pill { position: absolute; top: 12px; right: 12px; background: #e6f7f0; color: #16a34a; font-size: 12px; font-weight: 700; padding: 4px 10px; border-radius: 999px; display: inline-flex; align-items: center; gap: 6px; }

    a.card.disabled { opacity: .55; cursor: not-allowed; pointer-events: none; }

    .ia-helper { position: fixed; right: 18px; bottom: 18px; display: flex; align-items: flex-end; gap: 10px; z-index: 100;}

    .ia-msg { background: var(--color-surface); padding: 11px 14px; border-radius: 12px; box-shadow: var(--shadow-lg); font-size: 13px; max-width: 280px; color: var(--color-text-secondary); }

    .ia-avatar { width: 56px; height: 56px; border-radius: 50%; background: linear-gradient(135deg, var(--color-primary-start), var(--color-primary-end)); color: #fff; display: grid; place-items: center; font-size: 24px; animation: float 3s ease-in-out infinite; }

    @keyframes float { 0%,100% { transform: translateY(0);} 50% { transform: translateY(-8px);} }

    /* Estilos para el iframe */
    .content-frame {
      position: absolute;
      top: 20px;
      left: 0;
      width: 100%;
      height: calc(100vh - 130px);
      border: none;
      border-radius: 18px;
      background: white;
      box-shadow: var(--shadow-lg);
      display: none;
      overflow: auto;
    }

    .content-frame.active {
      display: block;
    }

    .home-content {
      display: block;
    }

    .home-content.hidden {
      display: none;
    }

  </style>

</head>

<body>

  <div class="background">

    <div class="blob blob1"></div>

    <div class="blob blob2"></div>

    <div class="blob blob3"></div>

  </div>

  <!-- Sidebar completo (se desliza) -->
  <aside class="sidebar">

    <h1>Gestor Operativo</h1>

    <h2>Plataforma de automatizaci√≥n</h2>

    <ul>

      <li><a href="#" onclick="showHome()" id="home-link">üè† Inicio</a></li>

      <li><a href="#" onclick="loadModule('transporte.html')" data-page="transporte">üöê Gesti√≥n de Transporte <span class='status-dot'></span></a></li>

      <li><a href="#" onclick="loadModule('calendario.html')" data-page="calendario">üìÖ Calendario Teletrabajo <span class='status-dot'></span></a></li>

      <li><a href="#" onclick="loadModule('turnos.html')" data-page="turnos">üìä Turnos Diarios <span class='status-dot'></span></a></li>

      <li><a href="#" onclick="loadModule('cartas.html')" data-page="cartas">üìÑ Carta Amonestaci√≥n <span class='status-dot'></span></a></li>

      <li><a href="#" onclick="loadModule('cambio-turnos.html')" data-page="cambio-turnos">üîÑ Cambio de Turnos <span class='status-dot'></span></a></li>

    </ul>

  </aside>

  <!-- Sidebar colapsado con √≠conos (siempre visible) -->
  <div class="sidebar-collapsed">
    <a href="#" onclick="showHome()" class="icon-only" id="home-icon">üè†</a>
    <a href="#" onclick="loadModule('transporte.html')" class="icon-only" data-page="transporte">üöê</a>
    <a href="#" onclick="loadModule('calendario.html')" class="icon-only" data-page="calendario">üìÖ</a>
    <a href="#" onclick="loadModule('turnos.html')" class="icon-only" data-page="turnos">üìä</a>
    <a href="#" onclick="loadModule('cartas.html')" class="icon-only" data-page="cartas">üìÑ</a>
    <a href="#" onclick="loadModule('cambio-turnos.html')" class="icon-only" data-page="cambio-turnos">üîÑ</a>
  </div>

  <header class="top-banner" id="topBanner">

    <h1>‚ö° Gestor Operativo</h1>

    <p>Plataforma de automatizaci√≥n inteligente</p>

  </header>

  <main class="main" id="mainContent">

    <!-- Contenido de inicio -->
    <section id="inicio" class="inicio home-content">

      <h1>üöÄ Bienvenido</h1>

      <p>Selecciona el m√≥dulo que deseas utilizar</p>

      <div class="card-grid">

        <a href="#" onclick="loadModule('transporte.html')" class="card">

          <div class="status-pill"><span class="status-dot"></span>Activo</div>

          <div class="card-icon">üöê</div>

          <h2>Gesti√≥n de Transporte</h2>

          <p>Genera reportes de arribo y zarpe de personal.</p>

        </a>

        <a href="#" onclick="loadModule('calendario.html')" class="card">

          <div class="status-pill"><span class="status-dot"></span>Activo</div>

          <div class="card-icon">üìÖ</div>

          <h2>Calendario Teletrabajo</h2>

          <p>Gestiona la presencialidad y el trabajo remoto.</p>

        </a>

        <a href="#" onclick="loadModule('turnos.html')" class="card">

          <div class="status-pill"><span class="status-dot"></span>Activo</div>

          <div class="card-icon">üìä</div>

          <h2>Turnos Diarios</h2>

          <p>Genera turnos de forma autom√°tica y optimizada.</p>

        </a>

        <a href="#" onclick="loadModule('cartas.html')" class="card">

            <div class="status-pill"><span class="status-dot"></span>Activo</div>

          <div class="card-icon">üìÑ</div>

          <h2>Carta de Amonestaci√≥n</h2>

          <p>Crea documentos formales en segundos.</p>

        </a>

        <a href="#" onclick="loadModule('cambio-turnos.html')" class="card">

          <div class="status-pill"><span class="status-dot"></span>Activo</div>

          <div class="card-icon">üîÑ</div>

          <h2>Cambio de Turnos</h2>

          <p>Gestiona solicitudes de cambio de turno entre agentes.</p>

        </a>

      </div>

    </section>

    <!-- Iframe para cargar m√≥dulos -->
    <iframe id="moduleFrame" class="content-frame" src=""></iframe>

  </main>

  <div class="ia-helper">

    <div class="ia-msg" id="iaMsg">üí° Consejo: Haz clic en un m√≥dulo para comenzar.</div>

    <div class="ia-avatar">ü§ñ</div>

  </div>

  <script>
    // Variables para elementos principales
    const sidebar = document.querySelector('.sidebar');
    const topBanner = document.querySelector('.top-banner');
    const main = document.querySelector('.main');
    
    // ===== SISTEMA DE IA INTELIGENTE =====
    class IntelligentAssistant {
      constructor() {
        this.currentModule = 'home';
        this.moduleData = {
          home: {
            name: 'Panel Principal',
            tips: [
              'üéØ Desde aqu√≠ puedes acceder a todos los m√≥dulos de automatizaci√≥n',
              '‚ö° Cada m√≥dulo est√° optimizado para tareas espec√≠ficas',
              'üìä Los indicadores verdes muestran que todos los sistemas est√°n operativos'
            ],
            welcome: '¬°Hola! Soy tu asistente inteligente. Te ayudo a optimizar tu flujo de trabajo.'
          },
          'transporte.html': {
            name: 'Gesti√≥n de Transporte',
            tips: [
              'üìã Aseg√∫rate de que tu archivo tenga la hoja "Direcciones" para mapear contactos',
              'üöê El sistema detecta autom√°ticamente turnos que requieren transporte (00:00, 07:00, 08:00, 22:00)',
              'üìÖ Puedes configurar feriados especiales para activar arribos a las 08:00',
              '‚ö†Ô∏è Solo se procesan agentes con estado "Activo" en el sistema'
            ],
            fileUploaded: '¬°Perfecto! He detectado tu archivo. Ahora selecciona la semana que necesitas procesar.',
            weekSelected: '‚úÖ Semana configurada. El sistema generar√° rutas optimizadas autom√°ticamente.',
            generating: 'üöê Analizando turnos y generando rutas de transporte inteligentes...',
            success: 'üéâ ¬°Excelente! Tu reporte de transporte est√° listo. El archivo incluye confirmaciones autom√°ticas.',
            errors: {
              noDirections: '‚ùå Falta la hoja "Direcciones". Sin ella no puedo mapear las ubicaciones.',
              noActiveAgents: '‚ö†Ô∏è No encontr√© agentes activos que necesiten transporte en esta semana.'
            }
          },
          'calendario.html': {
            name: 'Calendario Teletrabajo',
            tips: [
              'üè† Sistema inteligente de distribuci√≥n TT/Presencial basado en patrones',
              '‚öôÔ∏è Configuraciones especiales para turnos AM, PM, Noche y Fines de semana',
              'üìà 16 agentes preconfigurados con modalidades 3x2, 4x1 y especiales',
              'üéØ Puedes agregar nuevos agentes y personalizar sus patrones'
            ],
            fileUploaded: 'üìä Archivo cargado. He detectado los agentes y estoy preparando las configuraciones.',
            weekSelected: 'üìÖ Perfecto. Generar√© el calendario basado en los patrones inteligentes configurados.',
            generating: 'üß† Aplicando inteligencia artificial para distribuir TT y presencialidad...',
            success: 'üéä ¬°Calendario generado con √©xito! Distribuci√≥n optimizada aplicada.',
            configuring: '‚öôÔ∏è Ajusta las configuraciones de los agentes para personalizar la distribuci√≥n.'
          },
          'cartas.html': {
            name: 'Generador de Cartas',
            tips: [
              'üìù Genera cartas de amonestaci√≥n y compromiso autom√°ticamente',
              '‚è∞ Filtra por rango de fechas para procesar incidencias espec√≠ficas',
              'üîÑ Agrupa m√∫ltiples incidencias del mismo agente en una sola carta',
              'üìÑ Formato profesional listo para impresi√≥n y archivo'
            ],
            fileUploaded: 'üìã Datos cargados. Detectando incidencias de atrasos, ausencias y abandonos...',
            filtering: 'üîç Filtro por fechas activo. Ajusta el rango seg√∫n tus necesidades.',
            generating: '‚úçÔ∏è Redactando cartas personalizadas con formato legal corporativo...',
            success: 'üìú ¬°Cartas generadas exitosamente! Documentos listos para revisi√≥n y env√≠o.'
          },
          'turnos.html': {
            name: 'Turnos Diarios',
            tips: [
              'üîÑ Genera turnos automatizados con distribuci√≥n inteligente',
              'üìä Optimizaci√≥n basada en disponibilidad y cargas de trabajo',
              '‚öñÔ∏è Balanceo autom√°tico de recursos por franjas horarias'
            ],
            generating: '‚öôÔ∏è Procesando algoritmos de optimizaci√≥n de turnos...'
          },
          'cambio-turnos.html': {
            name: 'Cambio de Turnos',
            tips: [
              'üîÑ Gestiona solicitudes de intercambio entre agentes',
              '‚úÖ Validaci√≥n autom√°tica de compatibilidad de horarios',
              'üìã Tracking completo de solicitudes y aprobaciones'
            ],
            generating: 'üîÑ Procesando cambios y validando compatibilidades...'
          }
        };
        
        this.messageElement = document.getElementById('iaMsg');
        this.avatarElement = document.querySelector('.ia-avatar');
        this.initializeIntelligence();
      }
      
      initializeIntelligence() {
        // Mostrar mensaje de bienvenida inteligente
        this.showWelcomeMessage();
        
        // Configurar observadores para iframe
        this.setupIframeMonitoring();
        
        // Configurar detecci√≥n de interacciones
        this.setupInteractionDetection();
      }
      
      showWelcomeMessage() {
        const data = this.moduleData[this.currentModule];
        this.updateMessage(data.welcome || data.tips[0]);
      }
      
      setupIframeMonitoring() {
        const iframe = document.getElementById('moduleFrame');
        
        iframe.addEventListener('load', () => {
          if (iframe.src && this.currentModule !== 'home') {
            this.analyzeCurrentModule();
            this.monitorIframeActivity();
          }
        });
      }
      
      setupInteractionDetection() {
        // Detecci√≥n de hover en cards
        document.querySelectorAll('.card').forEach(card => {
          card.addEventListener('mouseenter', () => {
            const moduleName = this.getModuleNameFromCard(card);
            this.showModulePreview(moduleName);
          });
          
          card.addEventListener('mouseleave', () => {
            if (this.currentModule === 'home') {
              this.showWelcomeMessage();
            }
          });
        });
        
        // Detecci√≥n de actividad en sidebar
        document.querySelectorAll('.sidebar a, .icon-only').forEach(link => {
          link.addEventListener('mouseenter', () => {
            this.showQuickTip(link);
          });
        });
      }
      
      monitorIframeActivity() {
        const iframe = document.getElementById('moduleFrame');
        
        try {
          const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
          
          // Monitor file uploads
          const fileInputs = iframeDoc.querySelectorAll('input[type="file"]');
          fileInputs.forEach(input => {
            input.addEventListener('change', () => {
              this.onFileUploaded();
            });
          });
          
          // Monitor drag and drop
          const uploadAreas = iframeDoc.querySelectorAll('.upload-area');
          uploadAreas.forEach(area => {
            area.addEventListener('drop', () => {
              setTimeout(() => this.onFileUploaded(), 100);
            });
          });
          
          // Monitor selects and form interactions
          const selects = iframeDoc.querySelectorAll('select');
          selects.forEach(select => {
            select.addEventListener('change', () => {
              this.onSelectionMade();
            });
          });
          
          // Monitor button clicks
          const buttons = iframeDoc.querySelectorAll('.button');
          buttons.forEach(button => {
            button.addEventListener('click', () => {
              if (button.textContent.toLowerCase().includes('generar')) {
                this.onGenerationStarted();
              }
            });
          });
          
          // Monitor for success states
          const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
              if (mutation.type === 'childList' || mutation.type === 'attributes') {
                this.checkForSuccessIndicators(iframeDoc);
              }
            });
          });
          
          observer.observe(iframeDoc.body, {
            childList: true,
            subtree: true,
            attributes: true,
            attributeFilter: ['class', 'style']
          });
          
        } catch (error) {
          // Cross-origin restrictions - use polling as fallback
          this.setupPollingMonitor();
        }
      }
      
      setupPollingMonitor() {
        setInterval(() => {
          this.checkModuleState();
        }, 2000);
      }
      
      checkModuleState() {
        const iframe = document.getElementById('moduleFrame');
        try {
          const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
          this.checkForSuccessIndicators(iframeDoc);
        } catch (error) {
          // Silently handle cross-origin restrictions
        }
      }
      
      checkForSuccessIndicators(doc) {
        // Check for download indicators
        const downloadButtons = doc.querySelectorAll('.button.is-success, .button[disabled]');
        const successMessages = doc.querySelectorAll('.status-message.success, .status.success');
        const progressBars = doc.querySelectorAll('.progress-bar.active');
        
        if (downloadButtons.length > 0) {
          this.onDownloadReady();
        }
        
        if (successMessages.length > 0) {
          this.onOperationSuccess();
        }
        
        if (progressBars.length > 0) {
          this.onProgressDetected();
        }
      }
      
      onFileUploaded() {
        const data = this.moduleData[this.currentModule];
        if (data && data.fileUploaded) {
          this.updateMessage(data.fileUploaded, 'success');
          this.playAnimation('bounce');
        }
      }
      
      onSelectionMade() {
        const data = this.moduleData[this.currentModule];
        if (data && data.weekSelected) {
          this.updateMessage(data.weekSelected, 'info');
        }
      }
      
      onGenerationStarted() {
        const data = this.moduleData[this.currentModule];
        if (data && data.generating) {
          this.updateMessage(data.generating, 'working');
          this.playAnimation('pulse');
        }
      }
      
      onOperationSuccess() {
        const data = this.moduleData[this.currentModule];
        if (data && data.success) {
          this.updateMessage(data.success, 'success');
          this.playAnimation('celebration');
          this.showCelebration();
        }
      }
      
      onDownloadReady() {
        this.updateMessage('üéâ ¬°Descarga iniciada! Tu archivo se est√° generando autom√°ticamente.', 'success');
        this.showCelebration();
      }
      
      onProgressDetected() {
        this.playAnimation('pulse');
      }
      
      analyzeCurrentModule() {
        const data = this.moduleData[this.currentModule];
        if (data) {
          const randomTip = data.tips[Math.floor(Math.random() * data.tips.length)];
          this.updateMessage(randomTip, 'info');
        }
      }
      
      getModuleNameFromCard(card) {
        const title = card.querySelector('h2')?.textContent;
        if (title?.includes('Transporte')) return 'transporte.html';
        if (title?.includes('Calendario')) return 'calendario.html';
        if (title?.includes('Carta')) return 'cartas.html';
        if (title?.includes('Turnos Diarios')) return 'turnos.html';
        if (title?.includes('Cambio')) return 'cambio-turnos.html';
        return 'home';
      }
      
      showModulePreview(moduleName) {
        const data = this.moduleData[moduleName];
        if (data) {
          this.updateMessage(`üîç ${data.name}: ${data.tips[0]}`, 'preview');
        }
      }
      
      showQuickTip(element) {
        const text = element.textContent;
        const tips = {
          'Inicio': 'üè† Centro de comando - Acceso r√°pido a todos los m√≥dulos',
          'Gesti√≥n de Transporte': 'üöê Optimiza rutas y horarios de transporte autom√°ticamente',
          'Calendario Teletrabajo': 'üìÖ IA que distribuye TT/Presencial de forma inteligente',
          'Turnos Diarios': 'üìä Algoritmos avanzados para turnos equilibrados',
          'Carta Amonestaci√≥n': 'üìù Genera documentaci√≥n legal automatizada',
          'Cambio de Turnos': 'üîÑ Sistema inteligente de intercambios'
        };
        
        Object.entries(tips).forEach(([key, tip]) => {
          if (text.includes(key)) {
            this.updateMessage(tip, 'tip');
          }
        });
      }
      
      updateMessage(message, type = 'info') {
        this.messageElement.textContent = message;
        
        // Add visual feedback based on type
        this.messageElement.className = 'ia-msg';
        if (type === 'success') this.messageElement.style.background = '#e6f7f0';
        else if (type === 'working') this.messageElement.style.background = '#fff3cd';
        else if (type === 'preview') this.messageElement.style.background = '#e7f3ff';
        else this.messageElement.style.background = '';
      }
      
      playAnimation(type) {
        this.avatarElement.style.animation = 'none';
        
        setTimeout(() => {
          switch (type) {
            case 'bounce':
              this.avatarElement.style.animation = 'bounce 0.6s ease-in-out';
              break;
            case 'pulse':
              this.avatarElement.style.animation = 'pulse 1s ease-in-out infinite';
              break;
            case 'celebration':
              this.avatarElement.style.animation = 'celebration 1s ease-in-out';
              break;
            default:
              this.avatarElement.style.animation = 'float 3s ease-in-out infinite';
          }
        }, 10);
      }
      
      showCelebration() {
        // Create celebration effect
        const celebration = document.createElement('div');
        celebration.innerHTML = 'üéâ‚ú®üéä';
        celebration.style.cssText = `
          position: fixed; right: 30px; bottom: 100px; z-index: 200;
          font-size: 24px; animation: celebration-float 2s ease-out forwards;
          pointer-events: none;
        `;
        
        document.body.appendChild(celebration);
        
        setTimeout(() => {
          celebration.remove();
        }, 2000);
      }
      
      setCurrentModule(moduleName) {
        this.currentModule = moduleName;
        
        // Show contextual welcome message
        setTimeout(() => {
          const data = this.moduleData[moduleName];
          if (data) {
            this.updateMessage(`üöÄ ${data.name} activado. ${data.tips[0]}`, 'info');
          }
        }, 500);
      }
    }
    
    // A√±adir animaciones CSS adicionales
    const style = document.createElement('style');
    style.textContent = `
      @keyframes bounce {
        0%, 100% { transform: translateY(0) scale(1); }
        50% { transform: translateY(-10px) scale(1.1); }
      }
      
      @keyframes pulse {
        0%, 100% { transform: scale(1); opacity: 1; }
        50% { transform: scale(1.1); opacity: 0.8; }
      }
      
      @keyframes celebration {
        0% { transform: scale(1) rotate(0deg); }
        25% { transform: scale(1.2) rotate(10deg); }
        50% { transform: scale(1.1) rotate(-10deg); }
        75% { transform: scale(1.2) rotate(5deg); }
        100% { transform: scale(1) rotate(0deg); }
      }
      
      @keyframes celebration-float {
        0% { opacity: 0; transform: translateY(0) scale(0.5); }
        50% { opacity: 1; transform: translateY(-30px) scale(1); }
        100% { opacity: 0; transform: translateY(-60px) scale(0.8); }
      }
      
      .ia-msg {
        transition: all 0.3s ease;
      }
    `;
    document.head.appendChild(style);
    
    // Inicializar el asistente inteligente
    const assistant = new IntelligentAssistant();
    
    // ===== FUNCIONES ORIGINALES MEJORADAS =====
    
    // Funcionalidad para mostrar/ocultar sidebar
    document.addEventListener('mousemove', function(e) {
      if (e.clientX <= 50) {
        // Mostrar sidebar completo
        sidebar.classList.add('show');
        topBanner.style.left = '260px';
        main.style.marginLeft = '260px';
      } else if (e.clientX > 280) {
        // Ocultar sidebar completo, mostrar solo √≠conos
        sidebar.classList.remove('show');
        topBanner.style.left = '60px';
        main.style.marginLeft = '60px';
      }
    });
    
    // Mantener sidebar visible cuando el mouse est√° sobre √©l
    sidebar.addEventListener('mouseenter', function() {
      sidebar.classList.add('show');
      topBanner.style.left = '260px';
      main.style.marginLeft = '260px';
    });
    
    function loadModule(page) {
      // Ocultar contenido de inicio
      document.querySelector('.home-content').classList.add('hidden');
      
      // Mostrar iframe y cargar p√°gina
      const iframe = document.getElementById('moduleFrame');
      iframe.src = page;
      iframe.classList.add('active');
      
      // Actualizar navegaci√≥n activa
      updateActiveNav(page);
      
      // Actualizar asistente inteligente
      assistant.setCurrentModule(page);
    }
    
    function showHome() {
      // Mostrar contenido de inicio
      document.querySelector('.home-content').classList.remove('hidden');
      
      // Ocultar iframe
      const iframe = document.getElementById('moduleFrame');
      iframe.classList.remove('active');
      iframe.src = '';
      
      // Actualizar navegaci√≥n activa
      updateActiveNav('home');
      
      // Actualizar asistente
      assistant.setCurrentModule('home');
    }
    
    function updateActiveNav(activePage) {
      // Remover clase active de todos los enlaces
      document.querySelectorAll('.sidebar a, .icon-only').forEach(link => {
        link.classList.remove('active');
      });
      
      // Agregar clase active al enlace correspondiente
      if (activePage === 'home') {
        document.getElementById('home-link').classList.add('active');
        document.getElementById('home-icon').classList.add('active');
      } else {
        const activeLink = document.querySelector(`[data-page="${activePage.replace('.html', '')}"]`);
        if (activeLink) {
          activeLink.classList.add('active');
        }
        const activeIcon = document.querySelector(`.icon-only[data-page="${activePage.replace('.html', '')}"]`);
        if (activeIcon) {
          activeIcon.classList.add('active');
        }
      }
    }
    
    // Marcar inicio como activo por defecto
    document.getElementById('home-link').classList.add('active');
    document.getElementById('home-icon').classList.add('active');
  </script>

</body>

</html>
